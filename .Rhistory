install.packages("magick")
life_expectancy = read.csv("data/life-expectancy.csv")
world_map = map_data("world")
knitr::opts_chunk$set(echo = TRUE)
library(viridis)
?viridis
library(tidyverse)
library(magick)
world_map = map_data("world")
summary(world_map)
summary(world_map$group)
glimpse(t(world_map))
head(world_map)
summary(life_expectancy)
life_expectancy_2020 = subset(life_expectancy, Year=='2020')
head(life_expectancy_2020)
View(life_expectancy_2020)
colnames(life_expectancy)
colnames(life_expectancy)[4] <- "Life_Expectancy"
life_expectancy_2020 = subset(life_expectancy, Year=='2020')
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_colour_viridis() + theme_minimal()
View(life_expectancy)
View(life_expectancy_2020)
life_expectancy$Entity[life_expectancy$Entity == "United States"] <- "USA"
life_expectancy_2020 = subset(life_expectancy, Year=='2020')
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_colour_viridis() + theme_minimal()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_minimal()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_minimal()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") +
theme(panel.grid.major.x = element_blank())
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") +
theme(panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") +
theme(panel.border = element_blank(),
panel.background = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") +
theme_void()
View(life_expectancy_2020)
View(world_map)
View(unique(world_map$region))
View(unique(world_map$region)$Value)
View(unique(world_map$region$Value))
View(unique(world_map$region[Value]))
unique(world_map$region)
knitr::opts_chunk$set(echo = TRUE, Warning = FALSE, message = FALSE)
hist(le_df$Year)
# Loading the data
le_df <- read_csv("data/life-expectancy.csv")
hist(le_df$Year)
life_expectancy = read.csv("data/life-expectancy.csv")
colnames(life_expectancy)[4] <- "Life_Expectancy"
life_expectancy$Entity[life_expectancy$Entity == "United States"] <- "USA"
life_expectancy$Entity[life_expectancy$Entity == "Democratic Republic of Congo"] <- "Democratic Republic of the Congo"
life_expectancy_2020 = subset(life_expectancy, Year=='2020')
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void()
View(life_expectancy_2020)
life_expectancy$Entity[life_expectancy$Entity == "Congo"] <- "Republic of Congo"
life_expectancy_2020 = subset(life_expectancy, Year=='2020')
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void()
"England" in world_map$region
grepl("Ireland",world_map$region)
# Checking for entities with missing Code values
missing_entity_codes <- le_df %>% filter(is.na(Code)) %>%
select(Entity) %>% distinct()
missing_entity_codes
sum(str_detect(life_expectancy$Entity, 'Ireland')) > 0
sum(str_detect(world_map$region, 'Ireland')) > 0
sum(str_detect(life_expectancy$Entity, '^Ireland$')) > 0
sum(str_detect(world_map$region, '^Ireland$')) > 0
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void()
world_map = subset(map_data("world"), region != "Antarctica")
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.4) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.1) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_map()
ggplot() +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_map()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_map()
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.5)
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.4)
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.6)
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.2)
View(life_expectancy)
p <- ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = life_expectancy_2020, aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.2)
p <- ggplotly(p, tooltip = "text") %>%
animation_opts(frame = 500, transition = 0, redraw = FALSE) %>%
layout(xaxis = list(fixedrange = TRUE), yaxis = list(fixedrange = TRUE), hoverinfo = "none")
as.character(2024)
min(as.numeric(life_expectancy$Year))
i = min(as.numeric(life_expectancy$Year))
while (i <= max(as.numeric(life_expectancy$Year))) {
paste(i)
i++
}
i = min(as.numeric(life_expectancy$Year))
while (i <= max(as.numeric(life_expectancy$Year))) {
paste(i)
i+= 1
i = min(as.numeric(life_expectancy$Year))
while (i <= max(as.numeric(life_expectancy$Year))) {
paste(i)
i = i+1
}
2024-1543
filename = "plots/"+as.character(i)+".png"
class(as.character(i))
i.toString()
toString(i)
filename = "plots/"+toString(i)+".png"
class(toString(i))
filename = paste("plots/",toString(i),".png")
filename
filename = paste("plots/",as.character(i),".png")
filename
filename = paste("plots/",toString(i),".png",sep="")
filename
library(magick)
i = min(as.numeric(life_expectancy$Year))
while (i <= max(as.numeric(life_expectancy$Year))) {
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.2)
filename = paste("plots/",toString(i),".png",sep="")
ggsave(filename,p)
}
p
toString(i)
data = subset(life_expectancy, Year==toString(i))
data
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.2)
p
i = 1950
while (i <= max(as.numeric(life_expectancy$Year))) {
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.2)
filename = paste("plots/",toString(i),".png",sep="")
ggsave(filename,p)
}
filename
i = 1950
while (i <= max(as.numeric(life_expectancy$Year))) {
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy") + theme_void() + coord_fixed(1.2)
filename = paste("plots/",toString(i),".png",sep="")
ggsave(filename,p)
i = i+1
}
?scale_fill_gradient
i = 1950
while (i <= max(as.numeric(life_expectancy$Year))) {
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#cc4c02", high = "#fff7bc", name = "Life Expectancy",
limits = c(min(life_expectancy$Life_Expectancy), max(life_expectancy$Life_Expectancy))) +
theme_void() + coord_fixed(1.2)
filename = paste("plots/",toString(i),".png",sep="")
ggsave(filename,p)
i = i+1
}
png_files <- list.files("plots/",
pattern = "\\.png$",
recursive = FALSE,
all.files = FALSE,
full.names = TRUE)
png_files.length
png_files <- list.files("plots",
pattern = "\\.png$",
recursive = FALSE,
all.files = FALSE,
full.names = TRUE)
png_files %>%
map(image_read) %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 1) %>% # animates
image_write("All_plots.gif")
png_files %>%
map(image_read) %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 5) %>% # animates
image_write("All_plots.gif")
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#ee4c02", high = "#fcf7ec", name = "Life Expectancy",
limits = c(min(life_expectancy$Life_Expectancy), max(life_expectancy$Life_Expectancy))) +
theme_void() + coord_fixed(1.2)
i
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#ee4c02", high = "#fcf7ec", name = "Life Expectancy",
limits = c(min(life_expectancy$Life_Expectancy), max(life_expectancy$Life_Expectancy))) +
theme_void() + coord_fixed(1.2) +ggtitle(toString(i))
ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#ee4c02", high = "#fcf7ec", name = "Life Expectancy",
limits = c(min(life_expectancy$Life_Expectancy), max(life_expectancy$Life_Expectancy))) +
theme_void() + coord_fixed(1.2) + ggtitle(toString(i)) + theme(plot.title=element_text(hjust=0.5))
i = 1950
while (i <= max(as.numeric(life_expectancy$Year))) {
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#ee4c02", high = "#fcf7ec", name = "Life Expectancy",
limits = c(min(life_expectancy$Life_Expectancy), max(life_expectancy$Life_Expectancy))) +
theme_void() + coord_fixed(1.2) + ggtitle(toString(i)) + theme(plot.title=element_text(hjust=0.5))
filename = paste("plots/",toString(i),".png",sep="")
ggsave(filename,p)
i = i+1
}
png_files <- list.files("plots",
pattern = "\\.png$",
recursive = FALSE,
all.files = FALSE,
full.names = TRUE)
png_files %>%
map(image_read) %>% # reads each path file
image_join() %>% # joins image
image_animate(fps = 5) %>% # animates
image_write("All_plots.gif")
i=1960
p = ggplot() +
geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
fill = "grey", alpha = 0.3) +
geom_map(map = world_map, data = subset(life_expectancy, Year==toString(i)), aes(map_id=Entity, fill=Life_Expectancy)) +
scale_fill_gradient(low = "#ee4c02", high = "#fcf7ec", name = "Life Expectancy",
limits = c(min(life_expectancy$Life_Expectancy), max(life_expectancy$Life_Expectancy))) +
theme_void() + coord_fixed(1.2) + ggtitle(toString(i)) + theme(plot.title=element_text(hjust=0.5))
filename = paste("plots/",toString(i),".png",sep="")
ggsave(filename,p)
